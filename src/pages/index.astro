---
import { getCollection, getEntry } from 'astro:content';
import Hero from '../components/Hero.tsx';
import MuiThemeProvider from '../components/MuiThemeProvider.tsx';
import Layout from '../layouts/Layout.astro';

// Get hero content - try main first, then get the first available entry
let heroData;
try {
  heroData = await getEntry('hero', 'main');
  console.log('Loaded main hero entry');
} catch (error) {
  console.log('Main hero not found, getting all hero entries...');
  const allHero = await getCollection('hero');
  heroData = allHero?.[0];
  console.log('Loaded first hero entry:', heroData?.slug);
}

console.log('Final hero data:', heroData?.data);
---

<Layout>
	<MuiThemeProvider client:load>
		<Hero 
			client:load
			title={heroData?.data?.title || "Welcome to My Portfolio"}
			subtitle={heroData?.data?.subtitle || "Full-Stack Developer & UI/UX Enthusiast"}
			description={heroData?.data?.description || "I'm a full-stack developer passionate about creating amazing web experiences with modern technologies like React, TypeScript, and Astro."}
			ctaText={heroData?.data?.ctaText || "View My Work"}
			ctaLink={heroData?.data?.ctaLink || "#projects"}
		/>
	</MuiThemeProvider>
</Layout>
